(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{273:function(t,e,n){var content=n(288);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(88).default)("0698f38e",content,!0,{sourceMap:!1})},287:function(t,e,n){"use strict";var r=n(273);n.n(r).a},288:function(t,e,n){(e=n(87)(!1)).push([t.i,"table[data-v-2de86ecd]{font-size:larger}td[data-v-2de86ecd],th[data-v-2de86ecd]{text-align:center}tr.active[data-v-2de86ecd]{font-size:larger;font-weight:700}.buttons[data-v-2de86ecd]{text-align:center}.buttons a[data-v-2de86ecd],.buttons button[data-v-2de86ecd]{margin:0 10px}#progress[data-v-2de86ecd]{margin-top:15px}#progress .progress-bar[data-v-2de86ecd]{font-size:larger}",""]),t.exports=e},292:function(t,e,n){"use strict";n.r(e);n(14),n(112),n(23),n(36);var r={fetch:function(t){var e=t.store,n=t.params,r=t.$axios;e.dispatch("initRaces"),r.get("/api/"+n.id)},asyncData:function(t){return{currentHeat:t.params.id}},data:function(){return{timer:-1,currentHeat:1,progress:0,currentTime:""}},computed:{heats:function(){var t=this.$store.state.heats.length;if(0!==t){for(var e=0|this.currentHeat,n=[],i=e-2;i<=e;i++){var r=(i+t)%t,o=this.$store.state.heats[r],c=o.find((function(p){return p.name})).class;n.push({index:r+1,class:c,pilots:o,active:i+1===e})}return n}}},beforeMount:function(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){this.stop(),window.removeEventListener("keydown",this.onKeyDown)},methods:{start:function(){var t=this;this.stop(),this.$axios.get("/api/start");var e=Date.now();this.timer=setInterval((function(){var n=(Date.now()-e)/1e3,p=Math.min(n/165*100,100);100===p&&(t.stop(),t.goNext()),t.progress=p,t.currentTime="".concat(Math.round(n)," / ").concat(165-Math.round(n))}),100)},stop:function(){clearInterval(this.timer)},next:function(){var t=this.$store.state.heats.length;if(0===t)return"";var e=0|this.currentHeat;return"/".concat(e===t?1:e+1)},goNext:function(){this.$router.push(this.next())},prev:function(){var t=this.$store.state.heats.length;if(0===t)return"";var e=0|this.currentHeat;return"/".concat(1===e?t:e-1)},goPrevious:function(){this.$router.push(this.prev())},onKeyDown:function(t){switch(t.key){case"1":this.start();break;case"2":this.goPrevious();break;case"3":this.goNext()}}}},o=(n(287),n(67)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("table",{staticClass:"table"},[t._m(0),n("tbody",{staticClass:"list"},t._l(t.heats,(function(e){return n("tr",{key:e.index,class:{"table-success":e.active,active:e.active}},[n("td",[t._v(t._s(e.index))]),n("td",[t._v(t._s(e.class))]),t._l(e.pilots,(function(e,r){return n("td",{key:r},[t._v(t._s(e.JDL_ID.match(/^J/)?e.name:"-"))])}))],2)})),0)]),n("hr"),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button"},on:{click:t.start}},[t._v("スタート音 "),n("kbd",[t._v("1")])]),n("nuxt-link",{staticClass:"btn btn-lg btn-secondary",attrs:{role:"button",to:t.prev()}},[t._v("前のヒート"),n("kbd",[t._v("2")])]),n("nuxt-link",{staticClass:"btn btn-lg btn-primary",attrs:{role:"button",to:t.next()}},[t._v("次のヒート"),n("kbd",[t._v("3")])])],1),n("div",{staticClass:"progress",staticStyle:{height:"30px"},attrs:{id:"progress"}},[n("div",{staticClass:"progress-bar",style:{width:t.progress+"%"}},[t._v(t._s(t.currentTime))])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Heat")]),e("th",[this._v("Class")]),e("th",[this._v("E1: 5705")]),e("th",[this._v("F1: 5740")]),e("th",[this._v("F4: 5800")])])])}],!1,null,"2de86ecd",null);e.default=component.exports}}]);