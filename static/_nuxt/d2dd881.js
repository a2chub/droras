(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{281:function(t,n,e){var content=e(295);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(88).default)("0ea2a2f0",content,!0,{sourceMap:!1})},294:function(t,n,e){"use strict";e(281)},295:function(t,n,e){var r=e(87)((function(i){return i[1]}));r.push([t.i,"table[data-v-7d2d96d8]{font-size:larger}td[data-v-7d2d96d8],th[data-v-7d2d96d8]{text-align:center}tr.active[data-v-7d2d96d8]{font-size:larger;font-weight:700}.buttons[data-v-7d2d96d8]{text-align:center}.buttons a[data-v-7d2d96d8],.buttons button[data-v-7d2d96d8]{margin:0 10px}#progress[data-v-7d2d96d8]{margin-top:15px}#progress .progress-bar[data-v-7d2d96d8]{font-size:larger}.csv-buttons[data-v-7d2d96d8]{gap:10px;opacity:.5}",""]),r.locals={},t.exports=r},299:function(t,n,e){"use strict";e.r(n);e(112),e(212),e(213),e(214),e(11),e(149),e(22),e(113),e(1),e(35),e(14);var r={fetch:function(t){var n=t.store,e=t.params,r=t.$axios;n.dispatch("initRaces"),r.get("/api/"+e.id)},asyncData:function(t){return{currentHeat:t.params.id}},data:function(){return{timer:-1,currentHeat:1,progress:0,currentTime:""}},computed:{heats:function(){var t=this.$store.state.heats.length;if(0!==t){for(var n=0|this.currentHeat,e=[],i=n-2;i<=n;i++){var r=(i+t)%t,o=this.$store.state.heats[r],c=o.find((function(p){return p.name})),d=c?c.class:o[0].class;e.push({index:r+1,class:d,pilots:o,active:i+1===n})}return e}}},beforeMount:function(){window.addEventListener("keydown",this.onKeyDown)},beforeDestroy:function(){this.stop(),window.removeEventListener("keydown",this.onKeyDown)},methods:{start:function(){var t=this;this.stop(),this.$axios.get("/api/start");var n=Date.now();this.timer=setInterval((function(){var e=(Date.now()-n)/1e3,p=Math.min(e/165*100,100);100===p&&(t.stop(),t.goNext()),t.progress=p,t.currentTime="".concat(Math.round(e)," / ").concat(165-Math.round(e))}),100)},stop:function(){clearInterval(this.timer)},next:function(){var t=this.$store.state.heats.length;if(0===t)return"";var n=0|this.currentHeat;return"/".concat(n===t?1:n+1)},goNext:function(){this.$router.push(this.next())},prev:function(){var t=this.$store.state.heats.length;if(0===t)return"";var n=0|this.currentHeat;return"/".concat(1===n?t:n-1)},goPrevious:function(){this.$router.push(this.prev())},onKeyDown:function(t){switch(t.key){case"1":this.start();break;case"2":this.goPrevious();break;case"3":this.goNext()}},downloadCsv:function(){this.$axios.get("/csv_download")},reloadCsv:function(){this.$axios.get("/csv_reload")},uplodCsv:function(){this.$axios.get("/log_upload")}}},o=(e(294),e(64)),component=Object(o.a)(r,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"container"},[n("table",{staticClass:"table"},[t._m(0),n("tbody",{staticClass:"list"},t._l(t.heats,(function(e){return n("tr",{key:e.index,class:{"table-success":e.active,active:e.active}},[n("td",[t._v(t._s(e.index))]),n("td",[t._v(t._s(e.class))]),t._l(e.pilots,(function(e,r){return n("td",{key:r},[t._v(t._s(e.JDL_ID.match(/^J/)?e.name:"-"))])}))],2)})),0)]),n("hr"),n("div",{staticClass:"buttons"},[n("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button"},on:{click:t.start}},[t._v("スタート音 "),n("kbd",[t._v("1")])]),n("nuxt-link",{staticClass:"btn btn-lg btn-secondary",attrs:{role:"button",to:t.prev()}},[t._v("前のヒート"),n("kbd",[t._v("2")])]),n("nuxt-link",{staticClass:"btn btn-lg btn-primary",attrs:{role:"button",to:t.next()}},[t._v("次のヒート"),n("kbd",[t._v("3")])])],1),n("div",{staticClass:"progress",staticStyle:{height:"30px"},attrs:{id:"progress"}},[n("div",{staticClass:"progress-bar",style:{width:t.progress+"%"}},[t._v(t._s(t.currentTime))])]),n("div",{staticClass:"csv-buttons d-flex my-3 justify-content-md-end opacity"},[n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:t.downloadCsv}},[t._v("CSVダウンロード")]),n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:t.reloadCsv}},[t._v("CSVリロード")]),n("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:t.uplodCsv}},[t._v("CSVアップロード")])])])}),[function(){var t=this,n=t._self._c;return n("thead",[n("tr",[n("th",[t._v("Heat")]),n("th",[t._v("Class")]),n("th",[t._v("E1: 5705")]),n("th",[t._v("F1: 5740")]),n("th",[t._v("F4: 5800")])])])}],!1,null,"7d2d96d8",null);n.default=component.exports}}]);